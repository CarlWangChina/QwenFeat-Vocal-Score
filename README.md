# VocalVerseé¡¹ç›®æ€»è§ˆ

## ğŸ“œ è®¸å¯åè®®ä¸ç‰ˆæƒå£°æ˜ | License & Copyright

1. **åè®®æ¡†æ¶**ï¼šæœ¬é¡¹ç›®é‡‡ç”¨ **[CC BY-NC-ND 4.0](http://creativecommons.org/licenses/by-nc-nd/4.0/) (ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç»)** å›½é™…è®¸å¯åè®®ã€‚
2. **éå•†ä¸šç”¨é€”**ï¼šæœ¬é¡¹ç›®ä»£ç ã€æ¨¡å‹æƒé‡åŠæ–‡æ¡£ä»…é™å­¦æœ¯äº¤æµå’Œä¸ªäººæ•™è‚²ç”¨é€”å…è´¹ä½¿ç”¨ã€‚
3. **ä¸¥ç¦å•†ç”¨**ï¼šæœªç»ä¹¦é¢æˆæƒï¼Œä¸¥ç¦å°†æœ¬é¡¹ç›®ä»»ä½•éƒ¨åˆ†ç”¨äºä»»ä½•å½¢å¼çš„å•†ä¸šè¥åˆ©ç›®çš„ï¼ˆåŒ…æ‹¬ä½†ä¸é™äºé›†æˆè‡³å•†ä¸šè½¯ä»¶ã€æä¾›è¥åˆ©æ€§ AI æœåŠ¡ç­‰ï¼‰ã€‚
4. **å•†ä¸šæˆæƒç”³è¯·**ï¼šå¦‚æœ‰å•†ä¸šåˆä½œæ„å‘æˆ–éœ€è·å¾—å•†ä¸šä½¿ç”¨è®¸å¯ï¼Œè¯·åŠ¡å¿…è”ç³»é‚®ç®±ï¼š**3156018231@qq.com**ã€‚
---

## ğŸŒ ä»“åº“è¯´æ˜ | Repository Notes

* **ä¸­æ–‡è¯´æ˜**ï¼šæœ¬ä»“åº“ä¸»è¦æä¾›ä¸­æ–‡è¯´æ˜åŠç›¸å…³æ–‡æ¡£ã€‚
* **English Version**: This repository is primarily in Chinese. For the English version, please refer to: [https://github.com/CarlWangChina/Singing-Aesthetic-Assessment](https://github.com/CarlWangChina/Singing-Aesthetic-Assessment)

---

## ğŸ“– è®ºæ–‡å¼•ç”¨ä¸è¯´æ˜

å…³äºæœ¬ä»£ç å®ç°çš„è¯¦ç»†æŠ€æœ¯æ–¹æ¡ˆã€å®éªŒç»“æœåŠç†è®ºæ”¯æ’‘ï¼Œè¯·å‚è€ƒæˆ‘ä»¬çš„ç ”ç©¶è®ºæ–‡ã€‚å¦‚æœæ‚¨åœ¨ç ”ç©¶æˆ–å·¥ä½œä¸­ä½¿ç”¨äº†æœ¬ä»“åº“çš„ä»£ç æˆ–æ¨¡å‹ï¼Œæ¬¢è¿å¼•ç”¨æˆ‘ä»¬çš„è®ºæ–‡ã€‚

### è®ºæ–‡ä¿¡æ¯

**æ ‡é¢˜**ï¼šSinging Timbre Popularity Assessment Based on Multimodal Large Foundation Model
**ä¼šè®®**ï¼šProceedings of the 33rd ACM International Conference on Multimedia (MM '25)

* **ACM Digital Library (å®˜æ–¹ç‰ˆæœ¬)**: [https://doi.org/10.1145/3746027.3758148](https://doi.org/10.1145/3746027.3758148)
* **arXiv (å…è´¹é¢„è§ˆç‰ˆ)**: [https://www.arxiv.org/abs/2512.06999](https://www.arxiv.org/abs/2512.06999) 
  *(æ³¨ï¼šarXiv ç‰ˆæœ¬å†…å®¹ä¸ ACM DL å®˜æ–¹ç‰ˆæœ¬å®Œå…¨ä¸€è‡´)*

### å¼•ç”¨æ ¼å¼

#### ACM Reference Format
> Zihao Wang, Ruibin Yuan, Ziqi Geng, Hengjia Li, Xingwei Qu, Xinyi Li, Songye Chen, Haoying Fu, Roger B. Dannenberg, and Kejun Zhang. 2025. Singing Timbre Popularity Assessment Based on Multimodal Large Foundation Model. In Proceedings of the 33rd ACM International Conference on Multimedia (MM '25). Association for Computing Machinery, New York, NY, USA, 12227â€“12236. https://doi.org/10.1145/3746027.3758148

#### BibTeX
```bibtex
@inproceedings{10.1145/3746027.3758148,
author = {Wang, Zihao and Yuan, Ruibin and Geng, Ziqi and Li, Hengjia and Qu, Xingwei and Li, Xinyi and Chen, Songye and Fu, Haoying and Dannenberg, Roger B. and Zhang, Kejun},
title = {Singing Timbre Popularity Assessment Based on Multimodal Large Foundation Model},
year = {2025},
isbn = {9798400720352},
publisher = {Association for Computing Machinery},
address = {New York, NY, USA},
url = {[https://doi.org/10.1145/3746027.3758148](https://doi.org/10.1145/3746027.3758148)},
doi = {10.1145/3746027.3758148},
booktitle = {Proceedings of the 33rd ACM International Conference on Multimedia},
pages = {12227â€“12236},
numpages = {10},
keywords = {computational music aesthetics, descriptive feedback, multi-dimensional evaluation, multimodal foundation models, singing timbre popularity, singing voice assessment},
location = {Dublin, Ireland},
series = {MM '25}
}
```

Assessing the Popularity of Singing Timbre with a Multimodal Large Foundation Model

[qwenaudio](./qwenaudio/README.md) Qwenè¯„è¯­ç”Ÿæˆ+æ‰“åˆ†éƒ¨åˆ†. åŒ…å«è¾“å…¥éŸ³é¢‘ç»™Qwen-audioæˆ‘ä»¬ç”¨Loraè®­ç»ƒåçš„ç‰ˆæœ¬, è¾“å‡ºé’ˆå¯¹æ­Œå£°çš„å­˜åœ¨é—®é¢˜çš„è¯„è¯­ ç›¸å½“äºå¯¹éŸ³é¢‘åšæè¿°æ€§æ‰“æ ‡, ç„¶åè¯„è¯­å†ä½œä¸ºè¾“å…¥ä½œä¸ºæ·±åº¦æ€è€ƒéƒ¨åˆ†, æœ€ç»ˆè¿›è¡ŒéŸ³è‰²æ‰“åˆ†, ç„¶åç”¨æ­Œæ‰‹éŸ³è‰²çš„TTSå¿µå‡ºæ¥ç”Ÿæˆç‚¹è¯„è¯­éŸ³, è¿™ä¸€æ•´å¥—çš„æµç¨‹:

1.qwenå¾®è°ƒè®­ç»ƒåçš„æ¨¡å‹ç”Ÿæˆæ­Œå”±é—®é¢˜çš„è¯„è¯­.
2.è¯„è¯­+éŸ³é¢‘ä¸€èµ·å†æ¬¡ç»™qwenæ‰“åˆ†æ¨¡å‹æ¥è¾…åŠ©æ‰“åˆ†(ç›¸å½“äºåšäº†ä¸€æ¬¡æ·±åº¦æ€è€ƒ). 
3.æœ€åå†è°ƒä¸€æ¬¡å¤§æ¨¡å‹æ¥å¯¹è¯„è¯­è¿›è¡Œæ¶¦è‰²,  ç”Ÿæˆæ€»ç»“ , ç„¶åç»™å‡ºå”±æ³•å»ºè®®. 
4.åœ¨æœ€åæŠŠæ€»ç»“ç”¨å¯¹åº”æ­Œæ‰‹çš„å£°éŸ³å¿µå‡ºæ¥. 

è¿™ä¸€å—çš„æ‰€æœ‰æƒé‡éƒ½ä¿ç•™äº†, æ¨¡å‹å¯¹åº”ç›®å½•é“¾æ¥: å‰å¾€huggingfaceä¸‹è½½åŒ…å«æ¨¡å‹çš„å®Œæ•´ä»“åº“ï¼š [https://huggingface.co/karl-wang/QwenFeat-Vocal-Score/]  

[audioscore](./audioscore/README.md) MuQæ‰“åˆ†ã€æ’åºéƒ¨åˆ†. åŒ…å« åŠ è§£è€¦ å’Œ ä¸åŠ è§£è€¦ ä¸¤ä¸ªç‰ˆæœ¬, ä½¿ç”¨çš„åŒä¸€å¥—ä»£ç ï¼Œåªåˆ†äº†ä¸€ä¸ªç›®å½•. 

1ã€ä½¿ç”¨MuQä½œä¸ºencoder+åæ¥æ‰“åˆ†å™¨è¿›è¡Œæ‰“åˆ†çš„ä»£ç ,ä¸åŠ è§£è€¦,è¿™ä¸€å—çš„æ¶æ„è·ŸSongEvalå·¥ä½œåŸºæœ¬ç›¸åŒ.  å…¶ä¸­MuQè§£å†»ç”¨loraçš„æƒé‡ã€åé¢æ‰“åˆ†å™¨çš„æƒé‡, éƒ½ä¿ç•™äº†,æƒé‡å¯¹åº”ç›®å½•é“¾æ¥:  [https://huggingface.co/karl-wang/QwenFeat-Vocal-Score/]  

2ã€åŠ è§£è€¦ , é‡‡ç”¨SaMoye-SVCçš„ spk encoderä½œä¸ºåå‘æ¢¯åº¦è®­ç»ƒã€å¯¹è¯´è¯äººèº«ä»½ç‰¹å¾è¿›è¡Œè§£è€¦åˆ, æ¥æå‡å¯¹ç¾å­¦ç†è§£çš„å‡†ç¡®åº¦çš„å®éªŒéƒ¨åˆ†. 
äºŒè€…é¡¹ç›®ä»£ç æ˜¯åŒä¸€ä¸ªã€å…¼å®¹çš„. åŠ è§£è€¦éƒ¨åˆ†å› ä¸ºæœºæˆ¿é€€ç§Ÿæ—¶æ²¡æ¥å¾—åŠæ‹·è´ä¸‹æ¥, å¯¼è‡´æ¨¡å‹æƒé‡ä¸¢å¤±äº†. ä½†æ˜¯ä½¿ç”¨SaMoyeçš„spk encoderæˆ–è€…ç”¨wespeaker, è¿›è¡Œåå‘æ¢¯åº¦è®­ç»ƒæ¥è§£è€¦åˆ, çœ‹çœ‹æ•ˆæœæ˜¯å¦ä¼šå˜å¥½çš„å®éªŒ,å®éªŒç»“æœå¤§è‡´å¦‚ä¸‹: ä½¿ç”¨SaMoyeçš„spk encoderæˆ–è€… wespeakerçš„encoder, åˆ†åˆ«ä½œä¸ºåå‘æ¢¯åº¦æ¥è§£è€¦åˆ, ç„¶åæ‰“åˆ†, éƒ½ç‰¹åˆ«éš¾è®­ç»ƒã€éš¾æ”¶æ•›. ä½†æ˜¯batchsizeå°ä¸€ç‚¹ä¹Ÿèƒ½æ”¶æ•›. æœ€åè¯„ä»·ç¾å­¦ç­‰çº§çš„å‡†ç¡®ç‡, æ•ˆæœæ¯”åŸæ¥å¥½ä¸€ç‚¹ç‚¹. è¯´æ˜è¿™ä¸ªè§£è€¦éƒ¨åˆ†ç¡®å®æ˜¯æœ‰ç”¨çš„. 

æœ€åæ³¨æ„: æœ¬ä»“åº“ä¸åŒ…å«æ¨¡å‹éƒ¨åˆ†, ç ”ç©¶è€…éœ€è¦å‰å¾€huggingfaceä¸‹è½½åŒ…å«æ¨¡å‹çš„å®Œæ•´ä»“åº“ï¼š [https://huggingface.co/karl-wang/QwenFeat-Vocal-Score/]  
  

# VocalVerse1: åŸºäºqwenaudioçš„æ­Œå”±è¯„ä»·æ¨¡å‹

[qwenaudio](./qwenaudio/README.md) Qwenè¯„è¯­ç”Ÿæˆ+æ‰“åˆ†éƒ¨åˆ†. åŒ…å«è¾“å…¥éŸ³é¢‘ç»™Qwen-audioæˆ‘ä»¬ç”¨Loraè®­ç»ƒåçš„ç‰ˆæœ¬, è¾“å‡ºé’ˆå¯¹æ­Œå£°çš„å­˜åœ¨é—®é¢˜çš„è¯„è¯­ ç›¸å½“äºå¯¹éŸ³é¢‘åšæè¿°æ€§æ‰“æ ‡, ç„¶åè¯„è¯­å†ä½œä¸ºè¾“å…¥ä½œä¸ºæ·±åº¦æ€è€ƒéƒ¨åˆ†, æœ€ç»ˆè¿›è¡ŒéŸ³è‰²æ‰“åˆ†, ç„¶åç”¨æ­Œæ‰‹éŸ³è‰²çš„TTSå¿µå‡ºæ¥ç”Ÿæˆç‚¹è¯„è¯­éŸ³, è¿™ä¸€æ•´å¥—çš„æµç¨‹:

1.qwenå¾®è°ƒè®­ç»ƒåçš„æ¨¡å‹ç”Ÿæˆæ­Œå”±é—®é¢˜çš„è¯„è¯­.
2.è¯„è¯­+éŸ³é¢‘ä¸€èµ·å†æ¬¡ç»™qwenæ‰“åˆ†æ¨¡å‹æ¥è¾…åŠ©æ‰“åˆ†(ç›¸å½“äºåšäº†ä¸€æ¬¡æ·±åº¦æ€è€ƒ). 
3.æœ€åå†è°ƒä¸€æ¬¡å¤§æ¨¡å‹æ¥å¯¹è¯„è¯­è¿›è¡Œæ¶¦è‰²,  ç”Ÿæˆæ€»ç»“ , ç„¶åç»™å‡ºå”±æ³•å»ºè®®. 
4.åœ¨æœ€åæŠŠæ€»ç»“ç”¨å¯¹åº”æ­Œæ‰‹çš„å£°éŸ³å¿µå‡ºæ¥. 

è¿™ä¸€å—çš„æ‰€æœ‰æƒé‡éƒ½ä¿ç•™äº†, æ¨¡å‹å¯¹åº”ç›®å½•é“¾æ¥: å‰å¾€huggingfaceä¸‹è½½åŒ…å«æ¨¡å‹çš„å®Œæ•´ä»“åº“ï¼š [https://huggingface.co/karl-wang/QwenFeat-Vocal-Score/]  

## è°ƒç”¨æ–¹æ³•

### ä¸‹è½½æ¨¡å‹  
ä¸‹è½½ä¸‹é¢çš„ç›®å½•ï¼Œæ”¾åœ¨å½“å‰ä½ç½®  
https://huggingface.co/karl-wang/QwenFeat-Vocal-Score/tree/main/qwenaudio/ckpts  
ç›´æ¥git clone [https://huggingface.co/karl-wang/QwenFeat-Vocal-Score](https://huggingface.co/karl-wang/QwenFeat-Vocal-Score) ä¹Ÿå¯ä»¥

### å¯ç”¨æœåŠ¡  

`python scripts/infer_service.py`  
è°ƒç”¨ï¼š  
`curl -X POST http://localhost:8080/score   -F "file=@éŸ³é¢‘è·¯å¾„"`  

### å‘½ä»¤è¡Œè°ƒç”¨
`python scripts/infer.py éŸ³é¢‘è·¯å¾„.wav è¾“å‡ºæ–‡ä»¶.txt`

### pythonè°ƒç”¨

ä»£ç å‚è€ƒ `tests/test_score.py`

```python
import qwenaudio.processor
import qwenaudio.prompts
import librosa

# åˆå§‹åŒ–æ¨¡å‹å’Œå¤„ç†å™¨
processor = qwenaudio.processor.create_processor(
            "ckpts/generator-lora-32-16-scoreonly-f16/best_model_epoch_13/lora_weights",
            "ckpts/generator-lora-32-16-textonly-simple-v2-int4/best_model_epoch_16/lora_weights"
        )

# æ‰“åˆ†
audio_path= "/home/w-4090/cutted_score_audio_separated/446892/344523004.wav"
data, sr = librosa.load(audio_path, sr=processor.processor.feature_extractor.sampling_rate, mono=True)
data = data[:processor.processor.feature_extractor.sampling_rate * 30] # æˆªå–30ç§’
print(data.shape)

for i in range(4):
    print("test:", qwenaudio.prompts.prompt_mapper_reverse[i]) # è¾“å‡ºå‚æ•°0åˆ°4çš„å«ä¹‰
    score = processor.generate(data, i)# ç”Ÿæˆåˆ†æ•°
```

å¦‚æœåœ¨åŠ è½½æ¨¡å‹æ—¶å¡ä½ï¼Œå¯å¯ç”¨huggingfaceé•œåƒ
`export HF_ENDPOINT=https://hf-mirror.com`

### å…¶ä»–æ³¨æ„äº‹é¡¹ of qwenaudioæ­Œå”±è¯„ä»·æ¨¡å‹

condaç¯å¢ƒç”¨qwenaudio, ä¸¤ä¸ªæ¨¡å‹æƒé‡éƒ½å¤åˆ¶è¿›å»äº†

æˆ‘åŠ äº†infer_service.pyå’Œinfer.pyä¸¤ä¸ªè„šæœ¬ï¼Œä½¿ç”¨æ–¹æ³•æˆ‘å†™README.mdé‡Œé¢äº†. test/test_score.pyå¯ä»¥è¿è¡Œ

/home/w-4090/projects/qwenaudio/src/qwenaudio/prompts.py è¿™ä¸ªæ˜¯promptæ‰€åœ¨çš„ä½ç½®.

æµ‹è¯•è„šæœ¬åœ¨/home/w-4090/projects/qwenaudio/tests/test_processor_v2.pyå’Œ/home/w-4090/projects/qwenaudio/tests/test_processor_v3.py.

é™„å›¾1å’Œ2çš„ä»£ç , åŠ è½½æœ¬åœ°æ¨¡å‹æŠŠmodel.pyå’Œprocessor.pyä¸­çš„æ¨¡å‹è·¯å¾„æ”¹æˆæœ¬åœ°çš„å°±è¡Œäº†

<img width="1601" height="315" alt="77b6f8227c1d4af030fd7e2e0af8c8ab" src="https://github.com/user-attachments/assets/191e8e3f-2b67-43c0-b51e-f0b50f5d7dd6" />
<img width="1335" height="165" alt="76943b4c05d12bf090aecc602c8430b4" src="https://github.com/user-attachments/assets/8b058f65-de12-44c6-b041-e7db5ef97095" />

é™„å›¾3ä¸­ä¸¤ä¸ªæ˜¯è®­ç»ƒçš„loraæ¨¡å‹. è¿™ä¸ªæ˜¯è®­å¥½çš„. è¿™ä¸¤ä¸ªè¦ä¸Šä¼ 
<img width="418" height="56" alt="image" src="https://github.com/user-attachments/assets/e07494e7-eedc-44bc-b885-bf825de3d3dc" />

æ•´ä¸ªå·¥ç¨‹åŒ…æ‹¬ä»£ç å’Œloraæƒé‡éƒ½åœ¨é‡Œé¢ï¼Œä½†æ˜¯baseæ¨¡å‹éœ€è¦è”ç½‘ä¸‹è½½

å¦‚æœåªç”Ÿæ•ˆäº†ç»“å°¾çš„åˆ†ç±»å™¨ï¼Œæ¨¡å‹æœ¬ä½“çš„loraæ²¡ç”Ÿæ•ˆï¼Œå‡†ç¡®ç‡ä¼šå¾ˆä½ï¼›loraæƒé‡ç”Ÿæ•ˆåï¼Œå‡†ç¡®ç‡èƒ½80å¤š æ¥è¿‘9æˆ.  ç¼–ç å™¨+llmè§£ç +lora+åˆ†ç±»å™¨

é™„å›¾4 ä¸­Qwen2-Audio-7B-Instruct/è¿™ä¸ªbase æ¨¡å‹éƒ½è¦ï¼Œä¹‹å‰æ˜¯è‡ªåŠ¨ä¸‹è½½åˆ°.cacheé‡Œé¢çš„ï¼Œå•ç‹¬ä¸‹è½½çš„åº”è¯¥è¦ä»£ç é‡Œé¢é‡æ–°æŒ‡å®šè·¯å¾„

<img width="785" height="858" alt="32e73d7a89338a602f350225e859b67f" src="https://github.com/user-attachments/assets/26b3f4f9-2595-4567-934d-10d089785464" />


# VocalVerse2: åŸºäºMuQçš„äººå£°å½•éŸ³æ‰“åˆ†æ¨¡å‹ 

[audioscore](./audioscore/README.md) MuQæ‰“åˆ†ã€æ’åºéƒ¨åˆ†. åŒ…å« åŠ è§£è€¦ å’Œ ä¸åŠ è§£è€¦ ä¸¤ä¸ªç‰ˆæœ¬, ä½¿ç”¨çš„åŒä¸€å¥—ä»£ç ï¼Œåªåˆ†äº†ä¸€ä¸ªç›®å½•. 

1ã€ä½¿ç”¨MuQä½œä¸ºencoder+åæ¥æ‰“åˆ†å™¨è¿›è¡Œæ‰“åˆ†çš„ä»£ç ,ä¸åŠ è§£è€¦,è¿™ä¸€å—çš„æ¶æ„è·ŸSongEvalå·¥ä½œåŸºæœ¬ç›¸åŒ.  å…¶ä¸­MuQè§£å†»ç”¨loraçš„æƒé‡ã€åé¢æ‰“åˆ†å™¨çš„æƒé‡, éƒ½ä¿ç•™äº†,æƒé‡å¯¹åº”ç›®å½•é“¾æ¥:  [https://huggingface.co/karl-wang/QwenFeat-Vocal-Score/]  

2ã€åŠ è§£è€¦ , é‡‡ç”¨SaMoye-SVCçš„ spk encoderä½œä¸ºåå‘æ¢¯åº¦è®­ç»ƒã€å¯¹è¯´è¯äººèº«ä»½ç‰¹å¾è¿›è¡Œè§£è€¦åˆ, æ¥æå‡å¯¹ç¾å­¦ç†è§£çš„å‡†ç¡®åº¦çš„å®éªŒéƒ¨åˆ†. 
äºŒè€…é¡¹ç›®ä»£ç æ˜¯åŒä¸€ä¸ªã€å…¼å®¹çš„. åŠ è§£è€¦éƒ¨åˆ†å› ä¸ºæœºæˆ¿é€€ç§Ÿæ—¶æ²¡æ¥å¾—åŠæ‹·è´ä¸‹æ¥, å¯¼è‡´æ¨¡å‹æƒé‡ä¸¢å¤±äº†. ä½†æ˜¯ä½¿ç”¨SaMoyeçš„spk encoderæˆ–è€…ç”¨wespeaker, è¿›è¡Œåå‘æ¢¯åº¦è®­ç»ƒæ¥è§£è€¦åˆ, çœ‹çœ‹æ•ˆæœæ˜¯å¦ä¼šå˜å¥½çš„å®éªŒ,å®éªŒç»“æœå¤§è‡´å¦‚ä¸‹: ä½¿ç”¨SaMoyeçš„spk encoderæˆ–è€… wespeakerçš„encoder, åˆ†åˆ«ä½œä¸ºåå‘æ¢¯åº¦æ¥è§£è€¦åˆ, ç„¶åæ‰“åˆ†, éƒ½ç‰¹åˆ«éš¾è®­ç»ƒã€éš¾æ”¶æ•›. ä½†æ˜¯batchsizeå°ä¸€ç‚¹ä¹Ÿèƒ½æ”¶æ•›. æœ€åè¯„ä»·ç¾å­¦ç­‰çº§çš„å‡†ç¡®ç‡, æ•ˆæœæ¯”åŸæ¥å¥½ä¸€ç‚¹ç‚¹. è¯´æ˜è¿™ä¸ªè§£è€¦éƒ¨åˆ†ç¡®å®æ˜¯æœ‰ç”¨çš„. 

## ä½¿ç”¨æ–¹æ³•ï¼š  

### å®‰è£…ç¯å¢ƒ  

```bash
conda create -n audioscore python=3.10
conda activate audioscore
pip install -r requirements.txt
```

### ä¸‹è½½æ¨¡å‹  
ä¸‹è½½ä¸‹é¢çš„ç›®å½•ï¼Œæ”¾åœ¨å½“å‰ä½ç½®  
https://huggingface.co/karl-wang/QwenFeat-Vocal-Score/tree/main/audioscore/ckpts  
ç›´æ¥git clone [https://huggingface.co/karl-wang/QwenFeat-Vocal-Score](https://huggingface.co/karl-wang/QwenFeat-Vocal-Score) ä¹Ÿå¯ä»¥

### è°ƒç”¨  
(å¯æ‰§è¡Œçš„ä»£ç è§`python tests/test_generate_score.py`)  

```python
import os,sys
import audioscore.model

if __name__=="__main__":
    ROOT_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
    model = audioscore.model.SongEvalGenerator_audio_lora()
    model.load_model(os.path.join(ROOT_DIR,"ckpts", "SongEvalGenerator", "step_2_al_audio", "best_model_step_132000")) #åŠ è½½æ¨¡å‹
    model = model.half() #å¯é€‰
    model = model.cuda()

    score = model.generate_tag("/data/nfs/audioscore/data/sort/data/audio/203887_250822105518005501.m4a") #æ‰§è¡Œæ‰“åˆ†

    print("score:", score)

```

å¯ä»¥ç›´æ¥æ‰§è¡Œä¸‹é¢çš„ä»£ç è¿›è¡Œæµ‹è¯•  

```bash
python tests/test_generate_score.py
```

## è®­ç»ƒ  

ç›´æ¥è®­ç»ƒ  
`torchrun --nproc_per_node=4 --nnodes=1  scripts/train/train_sort_audio.py`  

å¯¹æŠ—è®­ç»ƒï¼ˆä½¿ç”¨samoyeçš„spk encoderè¿›è¡Œè§£è€¦ï¼‰  
`torchrun --nproc_per_node=4 --nnodes=1  scripts/train/train_sort_audio_grl.py`  
